<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Guess The Esport Player</title>
  <meta name="description" content="Un mini-jeu type Who Are Ya? adapt√© √† l'esport. Devine le joueur en 8 essais !" />
  <link rel="stylesheet" href="style.css">
  <link rel="icon" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Ccircle cx='50' cy='50' r='48' fill='%231a1f2e'/%3E%3Ctext x='50' y='58' text-anchor='middle' font-size='58' fill='%23a78bfa' font-family='Arial'%3E%E2%98%86%3C/text%3E%3C/svg%3E">
  <!-- Tailwind CSS CDN -->
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body>
    <nav>
    <a href="LEC.html">LEC</a>
    <a href="LCK.html">LCK/LPL</a>
    <a href="RL.html">Rocket League</a>
    <a href="Valorant.html">Valorant</a>
  </nav>

  <div id="root"></div>

  <!-- React 18 UMD + Babel for in-browser JSX (simple static hosting) -->
  <script src="https://unpkg.com/react@18/umd/react.production.min.js" crossorigin></script>
  <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js" crossorigin></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

  <script type="text/babel">
    const { useEffect, useMemo, useRef, useState } = React;

    // ------------------------- Demo dataset -------------------------
    const PLAYERS = [
      {
        id: 1,
        name: "Jake Howlett",
        alias: "Boaster",
        game: "Valorant",
        role: "IGL",
        team: "Fnactic",
        country: "UK",
        region: "EU",
        league: "VCT",
        age: 30,
        photoUrl: "Photos/Valorant/VCT/EMEA/FNATIC/Boaster.jpg"
      },
      {
        id: 2,
        name: "Emir Ali Beder",
        alias: "Alfajer",
        game: "Valorant",
        role: "Sentinel",
        team: "Fnactic",
        country: "Turquie",
        region: "EU",
        league: "VCT",
        age: 20,
        photoUrl: "Photos/Valorant/VCT/EMEA/FNATIC/Alfajer.jpg"
      },
      {
        id: 3,
        name: "Timofey Khromov",
        alias: "Chronicle",
        game: "Valorant",
        role: "Controller",
        team: "Fnactic",
        country: "Russie",
        region: "EU",
        league: "VCT",
        age: 22,
        photoUrl: "Photos/Valorant/VCT/EMEA/FNATIC/Chronicle.jpg"
      },
      {
        id: 4,
        name: "Kajetan Haremski",
        alias: "kaajak",
        game: "Valorant",
        role: "Duelist",
        team: "Fnactic",
        country: "Pologne",
        region: "EU",
        league: "VCT",
        age: 21,
        photoUrl: "Photos/Valorant/VCT/EMEA/FNATIC/kaajak.jpg"
      },
      {
        id: 5,
        name: "Austin Roberts",
        alias: "crashies",
        game: "Valorant",
        role: "Initiator",
        team: "Fnactic",
        country: "USA",
        region: "EU",
        league: "VCT",
        age: 27,
        photoUrl: "Photos/Valorant/VCT/EMEA/FNATIC/crashies.jpg"
      },
      {
        id: 6,
        name: "Ricardas Lukasevicius",
        alias: "Boo",
        game: "Valorant",
        role: "IGL",
        team: "Heretics",
        country: "Lituanie",
        region: "EU",
        league: "VCT",
        age: 27,
        photoUrl: "Photos/Valorant/VCT/EMEA/HERETICS/Boo.jpg"
      },
      {
        id: 7,
        name: "Benjy David Fish",
        alias: "benjyfishy",
        game: "Valorant",
        role: "Sentinel",
        team: "Heretics",
        country: "UK",
        region: "EU",
        league: "VCT",
        age: 21,
        photoUrl: "Photos/Valorant/VCT/EMEA/HERETICS/benjyfishy.jpg"
      },
      {
        id: 8,
        name: "Dominykas Lukasevicius",
        alias: "MiniBoo",
        game: "Valorant",
        role: "Duelist",
        team: "Heretics",
        country: "Lituanie",
        region: "EU",
        league: "VCT",
        age: 20,
        photoUrl: "Photos/Valorant/VCT/EMEA/HERETICS/MiniBoo.jpg"
      },
      {
        id: 9,
        name: "Enes Ecirli",
        alias: "RieNs",
        game: "Valorant",
        role: "Initiator",
        team: "Heretics",
        country: "Turquie",
        region: "EU",
        league: "VCT",
        age: 20,
        photoUrl: "Photos/Valorant/VCT/EMEA/HERETICS/RieNs.jpg"
      },
      {
        id: 10,
        name: "Mert Alkan",
        alias: "WoOt",
        game: "Valorant",
        role: "Flex",
        team: "Heretics",
        country: "Turquie",
        region: "EU",
        league: "VCT",
        age: 19,
        photoUrl: "Photos/Valorant/VCT/EMEA/HERETICS/WoOt.jpg"
      },
      {
        id: 11,
        name: "Ayaz Akhmetshin",
        alias: "nAts",
        game: "Valorant",
        role: "IGL",
        team: "Liquid",
        country: "Russie",
        region: "EU",
        league: "VCT",
        age: 23,
        photoUrl: "Photos/Valorant/VCT/EMEA/LIQUID/nAts.jpg"
      },
      {
        id: 12,
        name: "Georgio Sanassy",
        alias: "keiko",
        game: "Valorant",
        role: "Flex",
        team: "Liquid",
        country: "UK",
        region: "EU",
        league: "VCT",
        age: 21,
        photoUrl: "Photos/Valorant/VCT/EMEA/LIQUID/Keiko.jpg"
      },
      {
        id: 13,
        name: "Kamil Frackowiak",
        alias: "kamo",
        game: "Valorant",
        role: "Duelist",
        team: "Liquid",
        country: "Pologne",
        region: "EU",
        league: "VCT",
        age: 20,
        photoUrl: "Photos/Valorant/VCT/EMEA/LIQUID/kamo.jpg"
      },
      {
        id: 14,
        name: "Patryk Fabrowski",
        alias: "paTiTek",
        game: "Valorant",
        role: "Flex",
        team: "Liquid",
        country: "Pologne",
        region: "EU",
        league: "VCT",
        age: 25,
        photoUrl: "Photos/Valorant/VCT/EMEA/LIQUID/PaTiTek.jpg"
      },
      {
        id: 15,
        name: "Nikita Cherednichenko",
        alias: "trexx",
        game: "Valorant",
        role: "Initiator",
        team: "Liquid",
        country: "Russie",
        region: "EU",
        league: "VCT",
        age: 21,
        photoUrl: "Photos/Valorant/VCT/EMEA/LIQUID/trexx.jpg"
      },
      { 
        id: 16,
        name: "Burak Alkan",
        alias: "L√™wN",
        game: "Valorant",
        role: "Duelist",
        team: "BBL",
        country: "Turquie",
        region: "EU",
        league: "VCT",
        age: 18,
        photoUrl: "Photos/Valorant/VCT/EMEA/BBL/LewN.jpg"
      },
      {
        id: 17,
        name: "Elias Olkkonen",
        alias: "Jamppi",
        game: "Valorant",
        role: "Initiator",
        team: "BBL",
        country: "Finlande",
        region: "EU",
        league: "VCT",
        age: 24,
        photoUrl: "Photos/Valorant/VCT/EMEA/BBL/Jamppi.jpg"
      },
      {
        id: 18,
        name: "Dawid Swiec",
        alias: "PROFEK",
        game: "Valorant",
        role: "Smoker",
        team: "BBL",
        country: "Pologne",
        region: "EU",
        league: " VCT",
        age: 21,
        photoUrl: "Photos/Valorant/VCT/EMEA/BBL/profek.jpg"
      },
      {
        id: 19,
        name: "Volkan Y√∂nal",
        alias: "sociablEE",
        game: "Valorant",
        role: "Flex",
        team: "BBL",
        country: "Turquie",
        region: "EU",
        league: "VCT",
        age: 29,
        photoUrl: "Photos/Valorant/VCT/EMEA/BBL/sociablEE.jpg"
      },
      {
        id: 20,
        name: "Martin Penkov",
        alias: "Magnum",
        game: "Valorant",
        role: "Flex",
        team: "BBL",
        country: "Tch√©quie",
        region: "EU",
        league: "VCT",
        age: 24,
        photoUrl: "Photos/Valorant/VCT/EMEA/BBL/Magnum.jpg"
      },
      {
        id: 21,
        name: "Kyrylo Karasov",
        alias: "ANGE1",
        game: "Valorant",
        role: "IGL",
        team: "NAVI",
        country: "Ukraine",
        region: "EU",
        league: "VCT",
        age: 35,
        photoUrl: "Photos/Valorant/VCT/EMEA/NAVI/ANGE1.jpg"
      },
      {
        id: 22,
        name: "Andrei Kiprskii",
        alias: "Shao",
        game: "Valorant",
        role: "Flex",
        team: "NAVI",
        country: "Russie",
        region: "EU",
        league: "VCT",
        age: 25,
        photoUrl: "Photos/Valorant/VCT/EMEA/NAVI/Shao.jpg"
      },
      {
        id: 23,
        name: "Emirhan Kat",
        alias: "hiro",
        game: "Valorant",
        role: "Flex",
        team: "NAVI",
        country: "Turquie",
        region: "EU",
        league: "VCT",
        age: 19,
        photoUrl: "Photos/Valorant/VCT/EMEA/NAVI/hiro.jpg"
      },
      {
        id: 24,
        name: "Ugur G√º√ß",
        alias: "Ruxic",
        game: "Valorant",
        role: "Smoker",
        team: "NAVI",
        country: "Turquie",
        region: "EU",
        league: "VCT",
        age: 21,
        photoUrl: "Photos/Valorant/VCT/EMEA/NAVI/Ruxic.jpg"
      },
      {
        id: 25,
        name: "Alex Hawlasek",
        alias: "alexiiik",
        game: "Valorant",
        role: "Duelist",
        team: "NAVI",
        country: "Tch√©quie",
        region: "EU",
        league: "VCT",
        age: 19,
        photoUrl: "Photos/Valorant/VCT/EMEA/NAVI/alexiiik.jpg"
      },
      {
        id: 26,
        name: "Doƒüukan Balaban",
        alias: "qRaxs",
        game: "Valorant",
        role: "Iniator",
        team: "FUT",
        country: "Turquie",
        region: "EU",
        league: "VCT",
        age: 25,
        photoUrl: "Photos/Valorant/VCT/EMEA/FUT/qRaxs.jpg"
      },
      {
        id: 27,
        name: "Furkan Yeƒüen",
        alias: "MrFaliN",
        game: "Valorant",
        role: "IGL",
        team: "FUT",
        country: "Turquie",
        region: "EU",
        league: "VCT",
        age: 24,
        photoUrl: "Photos/Valorant/VCT/EMEA/FUT/MrFaliN.jpg"
      },
      {
        id: 28,
        name: "Eray Budak",
        alias: "yetujey",
        game: "Valorant",
        role: "Flex",
        team: "FUT",
        country: "Turquie",
        region: "EU",
        league: "VCT",
        age: 19,
        photoUrl: "Photos/Valorant/VCT/EMEA/FUT/Yetujey.jpg"
      },
      {
        id: 29,
        name: "Yusuf Doƒüan G√∂zgen",
        alias: "xeus",
        game: "Valorant",
        role: "Duelist",
        team: "FUT",
        country: "Turquie",
        region: "EU",
        league: "VCT",
        age: 20,
        photoUrl: "Photos/Valorant/VCT/EMEA/FUT/xeus.jpg"
      },
      {
        id: 30,
        name: "Mehmet Yaƒüiz ƒ∞pek",
        alias: "cNed",
        game: "Valorant",
        role: "Flex",
        team: "FUT",
        country: "Turquie",
        region: "EU",
        league: "VCT",
        age: 23,
        photoUrl: "Photos/Valorant/VCT/EMEA/FUT/cNed.jpg"
      },
      {
        id: 31,
        name: "Martin P√°tek",
        alias: "marteen",
        game: "Valorant",
        role: "Duelist",
        team: "Karmine Corp",
        country: "Tch√©quie",
        region: "EU",
        league: "VCT",
        age: 20,
        photoUrl: "Photos/Valorant/VCT/EMEA/KARMINE/marteen.jpg"
      },
      {
        id: 32,
        name: "Hazem Khaled",
        alias: "avez",
        game: "Valorant",
        role: "Flex",
        team: "Karmine Corp",
        country: "Egypte",
        region: "EU",
        league: "VCT",
        age: 20,
        photoUrl: "Photos/Valorant/VCT/EMEA/KARMINE/avez.jpg"
      },
      {
        id: 33,
        name: "Dmitrii Iliushin",
        alias: "SUYGETSU",
        game: "Valorant",
        role: "Smoker",
        team: "Karmine Corp",
        country: "Russie",
        region: "EU",
        league: "VCT",
        age: 23,
        photoUrl: "Photos/Valorant/VCT/EMEA/KARMINE/suygetsu.jpg"
      },
      {
        id: 34,
        name: "Matias Delipetro",
        alias: "Saadhak",
        game: "Valorant",
        role: "IGL",
        team: "Karmine Corp",
        country: "Argentine",
        region: "EU",
        league: "VCT",
        age: 28,
        photoUrl: "Photos/Valorant/VCT/EMEA/KARMINE/Saadhak.jpg"
      },
      {
        id: 35,
        name: "Artur Minin",
        alias: "pyrolll",
        game: "Valorant",
        role: "Flex",
        team: "Karmine Corp",
        country: "Estonie",
        region: "EU",
        league: "VCT",
        age: 24,
        photoUrl: "Photos/Valorant/VCT/EMEA/KARMINE/pyrolll.jpg"
      },
      {
        id: 36,
        name: "Kimmie Lassner",
        alias: "Kicks",
        game: "Valorant",
        role: "Smoker",
        team: "Vitality",
        country: "Estonie",
        region: "EU",
        league: "VCT",
        age: 19,
        photoUrl: "Photos/Valorant/VCT/EMEA/VITALITY/Kicks.jpg"
      },
      {
        id: 37,
        name: "Felipe de Loyola Basso",
        alias: "Less",
        game: "Valorant",
        role: "Flex",
        team: "Vitality",
        country: "Br√©sil",
        region: "EU",
        league: "VCT",
        age: 20,
        photoUrl: "Photos/Valorant/VCT/EMEA/VITALITY/Less.jpg"
      },
      {
        id: 38,
        name: "Nikita Sirmitev",
        alias: "Derke",
        game: "Valorant",
        role: "Duelist",
        team: "Vitality",
        country: "Finlande",
        region: "EU",
        league: "VCT",
        age: 22,
        photoUrl: "Photos/Valorant/VCT/EMEA/VITALITY/Derke.jpg"
      },
      {
        id: 39,
        name: "Bartosz Bernacki",
        alias: "UNFAKE",
        game: "Valorant",
        role: "IGL",
        team: "Vitality",
        country: "Pologne",
        region: "EU",
        league: "VCT",
        age: 28,
        photoUrl: "Photos/Valorant/VCT/EMEA/VITALITY/unfake.jpg"
      },
      {
        id: 40,
        name: "Blendi Kovaci",
        alias: "kovaQ",
        game: "Valorant",
        role: "Flex",
        team: "Vitality",
        country: "Suisse",
        region: "EU",
        league: "VCT",
        age: 21,
        photoUrl: "Photos/Valorant/VCT/EMEA/VITALITY/kovaQ.jpg"
      },
      {
        id: 41,
        name: "Dawid Czarnecki",
        alias: "Filu",
        game: "Valorant",
        role: "Duelist",
        team: "KOI",
        country: "Pologne",
        region: "EU",
        league: "VCT",
        age: 20,
        photoUrl: "Photos/Valorant/VCT/EMEA/KOI/Filu.jpg"
      },
      {
        id: 42,
        name: "Xavier Carlson",
        alias: "flyuh",
        game: "Valorant",
        role: "IGL",
        team: "KOI",
        country: "USA",
        region: "EU",
        league: "VCT",
        age: 21,
        photoUrl: "Photos/Valorant/VCT/EMEA/KOI/flyuh.jpg"
      },
      {
        id: 43,
        name: "Kamil Graniczka",
        alias: "BaddyG",
        game: "Valorant",
        role: "Smoker",
        team: "KOI",
        country: "Pologne",
        region: "EU",
        league: "VCT",
        age: 23,
        photoUrl: "Photos/Valorant/VCT/EMEA/KOI/baddyG.png"
      },
      {
        id: 44,
        name: "Ond≈ôej Petr≈Ø",
        alias: "MONSTEERR",
        game: "Valorant",
        role: "Flex",
        team: "KOI",
        country: "Tch√©quie",
        region: "EU",
        league: "VCT",
        age: 24,
        photoUrl: "Photos/Valorant/VCT/EMEA/KOI/monster.jpg"
      },
      {
        id: 45,
        name: "Nathan Bocqueho",
        alias: "nathaNk",
        game: "Valorant",
        role: "Flex",
        team: "KOI",
        country: "France",
        region: "EU",
        league: "VCT",
        age: 26,
        photoUrl: "Photos/Valorant/VCT/EMEA/KOI/nathaNk.jpg"
      },
      {
        id: 46,
        name: "Kirill Nekhozhin",
        alias: "Cloud",
        game: "Valorant",
        role: "IGL",
        team: "GiantX",
        country: "Russie",
        region: "EU",
        league: "VCT",
        age: 21,
        photoUrl: "Photos/Valorant/VCT/EMEA/GIANTX/cloud.jpg"
      },
      {
        id: 47,
        name: "Milsz Duda",
        alias: "westside",
        game: "Valorant",
        role: "Sentinel",
        team: "GiantX",
        country: "Pologne",
        region: "EU",
        league: "VCT",
        age: 19,
        photoUrl: "Photos/Valorant/VCT/EMEA/GIANTX/westside.jpg"
      },
      {
        id: 48,
        name: "Karel Maeckelbergh",
        alias: "Flickless",
        game: "Valorant",
        role: "Flex",
        team: "GiantX",
        country: "Belgique",
        region: "EU",
        league: "VCT",
        age: 23,
        photoUrl: "Photos/Valorant/VCT/EMEA/GIANTX/flickless.jpg"
      },
      {
        id: 49,
        name: "Eduard-George Hanceriuc",
        alias: "ara",
        game: "Valorant",
        role: "Duelist",
        team: "GiantX",
        country: "Roumanie",
        region: "EU",
        league: "VCT",
        age: 20,
        photoUrl: "Photos/Valorant/VCT/EMEA/GIANTX/ara.jpg"
      },
      {
        id: 50,
        name: "Grzegorz Ryczko",
        alias: "GRUBINHO",
        game: "Valorant",
        role: "Smoker",
        team: "GiantX",
        country: "Pologne",
        region: "EU",
        league: "VCT",
        age: 21,
        photoUrl: "Photos/Valorant/VCT/EMEA/GIANTX/grubinho.jpg"
      },
      {
        id: 51,
        name: "Patrik Hu≈°ek",
        alias: "Minny",
        game: "Valorant",
        role: "IGL",
        team: "M8",
        country: "Tch√©quie",
        region: "EU",
        league: "VCT",
        age: 20,
        photoUrl: "Photos/Valorant/VCT/EMEA/M8/minny.png"
      },
      {
        id: 52,
        name: "Maksymilian Jan Rychlewski",
        alias: "kamyk",
        game: "Valorant",
        role: "flex",
        team: "M8",
        country: "Pologne",
        region: "EU",
        league: "VCT",
        age: 22,
        photoUrl: "Photos/Valorant/VCT/EMEA/M8/kamyk.jpg"
      },
      {
        id: 53,
        name: "Sylvain Pattyn",
        alias: "Veqaj",
        game: "Valorant",
        role: "Initiator",
        team: "M8",
        country: "France",
        region: "EU",
        league: "VCT",
        age: 21,
        photoUrl: "Photos/Valorant/VCT/EMEA/M8/veqaj.jpg"
      },
      {
        id: 54,
        name: "Yusuf Emre Tunc",
        alias: "Proxh",
        game: "Valorant",
        role: "Smoker",
        team: "M8",
        country: "Allemagne",
        region: "EU",
        league: "VCT",
        age: 22,
        photoUrl: "Photos/Valorant/VCT/EMEA/M8/proxh.jpg"
      },
      {
        id: 55,
        name: "Berkcan ≈ûent√ºrk",
        alias: "ComeBack",
        game: "Valorant",
        role: "Duelist",
        team: "M8",
        country: "Turquie",
        region: "EU",
        league: "VCT",
        age: 18,
        photoUrl: "Photos/Valorant/VCT/EMEA/M8/comeback.jpg"
      },
      {
        id: 56,
        name: "Auni Chahade",
        alias: "AvovA",
        game: "Valorant",
        role: "Smoker",
        team: "Apeks",
        country: "Danemark",
        region: "EU",
        league: "VCT",
        age: 26,
        photoUrl: "Photos/Valorant/VCT/EMEA/APEKS/avova.jpg"
      },
      {
        id: 57,
        name: "Micha≈Ç ≈ÅƒÖcki",
        alias: "MOLSI",
        game: "Valorant",
        role: "Initiator",
        team: "Apeks",
        country: "Pologne",
        region: "EU",
        league: "VCT",
        age: 28,
        photoUrl: "Photos/Valorant/VCT/EMEA/APEKS/molsi.jpg"
      },
      {
        id: 58,
        name: "Mehmet Batu",
        alias: "batujnax",
        game: "Valorant",
        role: "Flex",
        team: "Apeks",
        country: "Turquie",
        region: "EU",
        league: "VCT",
        age: 20,
        photoUrl: "Photos/Valorant/VCT/EMEA/APEKS/batujnax.jpg"
      },
      {
        id: 59,
        name: "Diogo Oliveira",
        alias: "OLIZERA",
        game: "Valorant",
        role: "Flex",
        team: "Apeks",
        country: "Portugal",
        region: "EU",
        league: "VCT",
        age: 23,
        photoUrl: "Photos/Valorant/VCT/EMEA/APEKS/olizera.jpg"
      },
      {
        id: 60,
        name: "Erik Penny",
        alias: "penny",
        game: "Valorant",
        role: "Duelist",
        team: "Apeks",
        country: "Canada",
        region: "EU",
        league: "VCT",
        age: 22,
        photoUrl: "Photos/Valorant/VCT/EMEA/APEKS/penny.jpg"
      },
    ];

    const ATTRIBUTE_COLUMNS = [
      { key: "game", label: "Jeu" },
      { key: "role", label: "R√¥le" },
      { key: "team", label: "√âquipe" },
      { key: "league", label: "Ligue" },
      { key: "region", label: "R√©gion" },
      { key: "country", label: "Pays" },
      { key: "age", label: "√Çge" },
    ];

    const clamp = (n, min, max) => Math.max(min, Math.min(max, n));

    function seedFromDate(d) {
      const yyyy = d.getFullYear();
      const mm = d.getMonth() + 1;
      const dd = d.getDate();
      let x = yyyy * 10000 + mm * 100 + dd;
      x ^= x << 13; x ^= x >> 17; x ^= x << 5;
      return Math.abs(x);
    }

    function pickerDaily(arr, tzOffsetMinutes = 120) {
      const now = new Date();
      const local = new Date(now.getTime() + tzOffsetMinutes * 60000);
      const s = seedFromDate(local);
      const idx = s % arr.length;
      return arr[idx];
    }

    function compareField(field, guess, target) {
      const gv = guess[field];
      const tv = target[field];
      if (gv === tv) return { state: "match", text: String(gv) };

      if (field === "age") {
        const dir = gv > tv ? "‚Üì" : "‚Üë";
        return { state: "off", text: `${gv} ${dir}` };
      }
      if (field === "country" && guess.region === target.region) {
        return { state: "close", text: String(gv) };
      }
      if (field === "league" && guess.region === target.region) {
        return { state: "close", text: String(gv) };
      }
      if (field === "role" && gv && tv && gv.split("/").some((r) => String(tv).includes(r))) {
        return { state: "close", text: String(gv) };
      }
      return { state: "miss", text: String(gv ?? "‚Äî") };
    }

    function classForState(state) {
      switch (state) {
        case "match": return "bg-green-500 text-white";
        case "close": return "bg-red-500 text-black";
        case "off":   return "bg-gray-200 text-gray-900";
        default:      return "bg-slate-700 text-white";
      }
    }

    function silhouetteStyle(percent) {
      const blur = clamp(16 - (percent / 100) * 16, 0, 16);
      const dim = clamp(0.7 - (percent / 100) * 0.7, 0, 0.7);
      return { filter: `blur(${blur}px)`, opacity: 1 - dim };
    }

    function buildShare(guesses, target) {
      const header = `GuessTheEsportPlayer ‚Äî ${guesses.length}/8`;
      const lines = guesses.map((g) => {
        return ATTRIBUTE_COLUMNS.map(({ key }) => {
          const { state } = compareField(key, g, target);
          if (state === "match") return "üü©";
          if (state === "close") return "üü®";
          if (state === "off") return "‚¨ú";
          return "‚¨õ";
        }).join("");
      });
      return [header, ...lines].join("\\n");
    }

    function App() {
      const [practice, setPractice] = useState(false);
      const [target, setTarget] = useState(() => pickerDaily(PLAYERS));
      const [query, setQuery] = useState("");
      const [guesses, setGuesses] = useState([]);
      const [selectedIndex, setSelectedIndex] = useState(0);
      const [message, setMessage] = useState("");

      const maxTries = 8;
      const gameOver = guesses.length >= maxTries || (guesses.length > 0 && guesses[guesses.length - 1].id === target.id);
      const won = guesses.some((g) => g.id === target.id);

      const suggestions = useMemo(() => {
        const q = query.trim().toLowerCase();
        if (!q) return [];
        return PLAYERS.filter((p) =>
          [p.name, p.alias].some((s) => s?.toLowerCase().includes(q))
        ).slice(0, 8);
      }, [query]);

      const revealPercent = useMemo(() => {
        if (won) return 100;
        const matches = guesses.reduce((acc, g) => {
          let m = 0;
          ATTRIBUTE_COLUMNS.forEach(({ key }) => {
            if (compareField(key, g, target).state === "match") m += 1;
          });
          return acc + m;
        }, 0);
        return clamp(Math.round((matches / (ATTRIBUTE_COLUMNS.length * maxTries)) * 100) + guesses.length * 5, 0, 99);
      }, [guesses, target, won]);

      useEffect(() => {
        const onKey = (e) => {
          if (e.key === "ArrowDown") {
            e.preventDefault();
            setSelectedIndex((i) => clamp(i + 1, 0, Math.max(0, suggestions.length - 1)));
          } else if (e.key === "ArrowUp") {
            e.preventDefault();
            setSelectedIndex((i) => clamp(i - 1, 0, Math.max(0, suggestions.length - 1)));
          } else if (e.key === "Enter" && suggestions[selectedIndex]) {
            e.preventDefault();
            onPick(suggestions[selectedIndex]);
          }
        };
        window.addEventListener("keydown", onKey);
        return () => window.removeEventListener("keydown", onKey);
      }, [suggestions, selectedIndex]);

      function onPick(player) {
        if (gameOver) return;
        if (guesses.some((g) => g.id === player.id)) {
          setMessage("D√©j√† essay√©.");
          return;
        }
        setGuesses((gs) => [...gs, player]);
        setQuery("");
        setSelectedIndex(0);
        setMessage("");
      }

      function onReroll() {
        setGuesses([]);
        setQuery("");
        setSelectedIndex(0);
        if (practice) {
          const pool = PLAYERS.filter((p) => p.id !== target.id);
          setTarget(pool[Math.floor(Math.random() * pool.length)]);
        } else {
          setTarget(pickerDaily(PLAYERS));
        }
      }

      async function onShare() {
        const text = buildShare(guesses, target);
        try {
          await navigator.clipboard.writeText(text);
          setMessage("R√©sultat copi√© dans le presse-papiers ‚ú®");
        } catch (e) {
          setMessage("Impossible de copier. (Permissions clipboard)");
        }
      }

      return (
        <div className="min-h-screen bg-gradient-to-b from-slate-900 via-slate-900 to-slate-950 text-slate-50 p-4 sm:p-8">
          <div className="mx-auto max-w-5xl">
            <header className="flex flex-col sm:flex-row gap-4 items-center justify-between mb-6">
              <h1 className="text-3xl sm:text-4xl font-extrabold tracking-tight">
                Guess The <span className="text-indigo-400">Esport Player</span>
              </h1>
              <div className="flex items-center gap-2">
                <button
                  onClick={() => setPractice((p) => !p)}
                  className={"px-3 py-2 text-sm rounded-2xl shadow " + (practice ? "bg-indigo-500" : "bg-slate-800")}
                  title="Basculer en mode entra√Ænement"
                >
                  {practice ? "Mode entra√Ænement" : "Mode quotidien"}
                </button>
                <button
                  onClick={onReroll}
                  className="px-3 py-2 text-sm rounded-2xl shadow bg-slate-800 hover:bg-slate-700"
                >
                  {practice ? "Nouveau tirage" : "Recharger le jour"}
                </button>
              </div>
            </header>

            <div className="grid grid-cols-1 lg:grid-cols-3 gap-6 mb-8">
              <div className="lg:col-span-1">
                <div className="relative w-full aspect-square rounded-2xl overflow-hidden bg-slate-800 shadow-xl">
                  {target.photoUrl ? (
                    <img
                      src={target.photoUrl}
                      alt="Player"
                      className="w-full h-full object-cover"
                      style={silhouetteStyle(revealPercent)}
                    />
                  ) : (
                    <div className="w-full h-full flex items-center justify-center text-6xl">üïµÔ∏è‚Äç‚ôÇÔ∏è</div>
                  )}
                  <div className="absolute bottom-0 left-0 right-0 p-3 bg-gradient-to-t from-black/60 to-transparent text-sm flex items-center justify-between">
                    <span>R√©v√©lation: {revealPercent}%</span>
                    {won && <span className="font-semibold text-green-400">Bravo !</span>}
                  </div>
                </div>
              </div>

              <div className="lg:col-span-2">
                <div className="rounded-2xl bg-slate-800/70 border border-slate-700 p-4 shadow-xl">
                  <label className="block text-sm text-slate-300 mb-2">Tape un pseudo ou un nom</label>
                  <input
                    value={query}
                    onChange={(e) => setQuery(e.target.value)}
                    placeholder="Ex: Chronicle, Marteen‚Ä¶"
                    className="w-full rounded-xl bg-slate-900 border border-slate-700 px-4 py-3 outline-none focus:ring-2 focus:ring-indigo-500"
                  />

                  {suggestions.length > 0 && (
                    <ul className="mt-3 max-h-64 overflow-auto rounded-xl border border-slate-700 bg-slate-900 divide-y divide-slate-800">
                      {suggestions.map((p, i) => (
                        <li
                          key={p.id}
                          onClick={() => onPick(p)}
                          className={"px-4 py-3 cursor-pointer hover:bg-slate-800 flex items-center justify-between " + (i === selectedIndex ? "bg-slate-800" : "")}
                        >
                          <div>
                            <div className="font-semibold">{p.alias}</div>
                            <div className="text-xs text-slate-400">{p.name}</div>
                          </div>
                          <div className="text-xs text-slate-400">{p.team} ‚Ä¢ {p.game}</div>
                        </li>
                      ))}
                    </ul>
                  )}

                  <div className="flex items-center justify-between mt-4 text-sm text-slate-400">
                    <span>Essais: <b className="text-slate-200">{guesses.length}</b> / {maxTries}</span>
                    <div className="flex gap-2">
                      <button onClick={onShare} disabled={guesses.length === 0} className="px-3 py-2 rounded-xl bg-indigo-600 disabled:opacity-50">
                        Partager
                      </button>
                      <button
                        onClick={() => { setGuesses([]); setMessage("R√©initialis√©."); }}
                        className="px-3 py-2 rounded-xl bg-slate-700"
                      >
                        R√©initialiser
                      </button>
                    </div>
                  </div>
                  {message && <div className="mt-2 text-sm text-slate-300">{message}</div>}
                </div>
              </div>
            </div>

            <section className="rounded-2xl bg-slate-800/70 border border-slate-700 p-4 shadow-xl">
              <h2 className="text-lg font-semibold mb-3">Tes propositions</h2>
              <div className="overflow-x-auto">
                <table className="min-w-full text-sm">
                  <thead className="text-left text-slate-300">
                    <tr>
                      <th className="p-2">Joueur</th>
                      {ATTRIBUTE_COLUMNS.map((c) => (
                        <th key={c.key} className="p-2 whitespace-nowrap">{c.label}</th>
                      ))}
                    </tr>
                  </thead>
                  <tbody>
                    {guesses.map((g) => (
                      <tr key={g.id} className="border-t border-slate-700">
                        <td className="p-2">
                          <div className="flex items-center gap-3">
                            <div className="w-9 h-9 rounded-lg bg-slate-700 overflow-hidden">
                              <img src={g.photoUrl} alt="" className="w-full h-full object-cover" />
                            </div>
                            <div>
                              <div className="font-semibold">{g.alias}</div>
                              <div className="text-xs text-slate-400">{g.name}</div>
                            </div>
                          </div>
                        </td>
                        {ATTRIBUTE_COLUMNS.map(({ key }) => {
                          const { state, text } = compareField(key, g, target);
                          return (
                            <td key={key} className="p-2">
                              <span className={"px-2 py-1 rounded-lg text-xs font-semibold inline-block " + classForState(state)}>
                                {text}
                              </span>
                            </td>
                          );
                        })}
                      </tr>
                    ))}
                    {guesses.length === 0 && (
                      <tr>
                        <td colSpan={1 + ATTRIBUTE_COLUMNS.length} className="p-6 text-center text-slate-400">
                          Aucune proposition pour l'instant. Cherche un joueur ci-dessus.
                        </td>
                      </tr>
                    )}
                  </tbody>
                </table>
              </div>

              <div className="mt-4 p-4 rounded-xl bg-slate-900 border border-slate-700">
                {won ? (
                  <div>
                    <div className="text-green-400 font-semibold mb-1">Tu as trouv√© !</div>
                    <div className="text-slate-300">C'√©tait <b>{target.alias}</b> ({target.name}).</div>
                  </div>
                ) : (
                  <div>
                    <div className="text-slate-300">Tente ta chance en {practice ? "entra√Ænement" : "quotidien"}.</div>
                  </div>
                )}
              </div>
            </section>

            <footer className="text-xs text-slate-400 mt-8 space-y-2">
              <p>
                Remplace la liste <code>PLAYERS</code> par tes donn√©es (JSON, API, etc.).
                Champs: <code>name</code>, <code>alias</code>, <code>game</code>, <code>role</code>, <code>team</code>, <code>league</code>, <code>region</code>, <code>country</code>, <code>age</code>, <code>photoUrl</code>.
              </p>
              <p></p>
            </footer>
          </div>
        </div>
      );
    }

    const root = ReactDOM.createRoot(document.getElementById("root"));
    root.render(<App />);
  </script>
</body>
</html>