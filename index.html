<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Guess The Esport Player</title>
  <meta name="description" content="Un mini-jeu type Who Are Ya? adapt√© √† l'esport. Devine le joueur en 8 essais !" />
  <link rel="icon" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Ccircle cx='50' cy='50' r='48' fill='%231a1f2e'/%3E%3Ctext x='50' y='58' text-anchor='middle' font-size='58' fill='%23a78bfa' font-family='Arial'%3E%E2%98%86%3C/text%3E%3C/svg%3E">
  <!-- Tailwind CSS CDN -->
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    html, body { background: #0b1220; }
  </style>
</head>
<body>
  <div id="root"></div>

  <!-- React 18 UMD + Babel for in-browser JSX (simple static hosting) -->
  <script src="https://unpkg.com/react@18/umd/react.production.min.js" crossorigin></script>
  <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js" crossorigin></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

  <script type="text/babel">
    const { useEffect, useMemo, useRef, useState } = React;

    // ------------------------- Demo dataset -------------------------
    const PLAYERS = [
      {
        id: 1,
        name: "√ìscar Mu√±oz Jim√©nez",
        alias: "Oscarinin",
        game: "League of Legends",
        role: "Top",
        team: "Fnactic",
        country: "Espagne",
        region: "EU",
        league: "LEC",
        age: 22,
        photoUrl: "Photos/LEC/Fnatic/Oscarinin.jpg"
      },
      {
        id: 2,
        name: "Iv√°n Mart√≠n D√≠az",
        alias: "Razork",
        game: "League of Legends",
        role: "Jungle",
        team: "Fnactic",
        country: "Espagne",
        region: "EU",
        league: "LEC",
        age: 24,
        photoUrl: "https://liquipedia.net/commons/images/thumb/4/45/FNC_Razork_MSI_2024.jpg/600px-FNC_Razork_MSI_2024.jpg"
      },
      {
        id: 3,
        name: "Yun Sung-Won",
        alias: "Poby",
        game: "League of Legends",
        role: "Mid",
        team: "Fnactic",
        country: "Cor√© du Sud",
        region: "EU",
        league: "LEC",
        age: 19,
        photoUrl: "https://liquipedia.net/commons/images/thumb/6/6c/T1.EA_Poby_LCK_CL_Kickoff_2025.jpg/600px-T1.EA_Poby_LCK_CL_Kickoff_2025.jpg"
      },
      {
        id: 4,
        name: "Elias Lipp",
        alias: "Upset",
        game: "League of Legends",
        role: "ADC",
        team: "Fnactic",
        country: "Allemagne",
        region: "EU",
        league: "LEC",
        age: 25,
        photoUrl: "https://liquipedia.net/commons/images/thumb/6/6e/FNC_Upset_LEC_Winter_2025.jpg/600px-FNC_Upset_LEC_Winter_2025.jpg"
      },
      {
        id: 5,
        name: "Mihael Mehle",
        alias: "Mikyx",
        game: "League of Legends",
        role: "Support",
        team: "Fnactic",
        country: "Slov√©nie",
        region: "EU",
        league: "LEC",
        age: 26,
        photoUrl: "https://liquipedia.net/commons/images/thumb/7/70/FNC_Mikyx_LEC_Winter_2025.jpg/600px-FNC_Mikyx_LEC_Winter_2025.jpg"
      },
      {
        id: 6,
        name: "Sergen √áelik",
        alias: "BrokenBlade",
        game: "League of Legends",
        role: "Top",
        team: "G2",
        country: "Allemange/Turquie",
        region: "EU",
        league: "LEC",
        age: 25,
        photoUrl: "https://liquipedia.net/commons/images/thumb/3/3b/G2_BrokenBlade_Worlds_2023.jpg/600px-G2_BrokenBlade_Worlds_2023.jpg"
      },
      {
        id: 7,
        name: "Rudy Semaan",
        alias: "SkewMond",
        game: "League of Legends",
        role: "Jungle",
        team: "G2",
        country: "France",
        region: "EU",
        league: "LCS",
        age: 21,
        photoUrl: "https://liquipedia.net/commons/images/thumb/9/9b/G2_SkewMond_LEC_Winter_2025.jpg/600px-G2_SkewMond_LEC_Winter_2025.jpg"
      },
      {
        id: 8,
        name: "Rasmus Winther",
        alias: "Caps",
        game: "League of Legends",
        role: "Mid",
        team: "G2",
        country: "Danemark",
        region: "EU",
        league: "LEC",
        age: 25,
        photoUrl: "https://liquipedia.net/commons/images/thumb/a/a7/G2_Caps_MSI_2025.jpg/600px-G2_Caps_MSI_2025.jpg"
      },
      {
        id: 9,
        name: "Steven Liv",
        alias: "Hans Sama",
        game: "League of Legends",
        role: "ADC",
        team: "G2",
        country: "France",
        region: "EU",
        league: "LEC",
        age: 25,
        photoUrl: "https://liquipedia.net/commons/images/thumb/1/18/G2_Hans_Sama_MSI_2024.jpg/600px-G2_Hans_Sama_MSI_2024.jpg"
      },
      {
        id: 10,
        name: "Labros Papoutsakis",
        alias: "Labrov",
        game: "League of Legends",
        role: "Support",
        team: "G2",
        country: "Gr√®ce",
        region: "EU",
        league: "LEC",
        age: 23,
        photoUrl: "https://liquipedia.net/commons/images/thumb/b/bf/G2_Labrov_LEC_Winter_2025.jpg/600px-G2_Labrov_LEC_Winter_2025.jpg"
      },
      {
        id: 11,
        name: "Eren Yildiz",
        alias: "Lot",
        game: "League of Legends",
        role: "Top",
        team: "GiantX",
        country: "Turquie",
        region: "EU",
        league: "LEC",
        age: 21,
        photoUrl: "https://liquipedia.net/commons/images/thumb/a/a1/GX_Lot_LEC_Winter_2025.jpg/600px-GX_Lot_LEC_Winter_2025.jpg"
      },
      {
        id: 12,
        name: "Isma√Øl Boualem",
        alias: "Isma",
        game: "League of Legends",
        role: "Jungle",
        team: "GiantX",
        country: "Belgique",
        region: "EU",
        league: "LEC",
        age: 24,
        photoUrl: "https://liquipedia.net/commons/images/thumb/f/f2/SK_Isma_LEC2024.jpg/600px-SK_Isma_LEC2024.jpg"
      },
      {
        id: 13,
        name: "Adam Jerabek",
        alias: "Jackies",
        game: "League of Legends",
        role: "Mid",
        team: "GiantX",
        country: "Tch√©quie",
        region: "EU",
        league: "LEC",
        age: 20,
        photoUrl: "https://liquipedia.net/commons/images/thumb/d/d8/GX_Jackies_LEC_Winter_2024.jpg/600px-GX_Jackies_LEC_Winter_2024.jpg"
      },
      {
        id: 14,
        name: "Oh Hyeon-taek",
        alias: "Noah",
        game: "League of Legends",
        role: "ADC",
        team: "GiantX",
        country: "Cor√©e du Sud",
        region: "EU",
        league: "LEC",
        age: 23,
        photoUrl: "https://liquipedia.net/commons/images/thumb/4/42/GX_Noah_LEC_Winter_2025.jpg/600px-GX_Noah_LEC_Winter_2025.jpg"
      },
      {
        id: 15,
        name: "Yoon Se-jun",
        alias: "Jun",
        game: "League of Legends",
        role: "Support",
        team: "GiantX",
        country: "Cor√©e du Sud",
        region: "EU",
        league: "LEC",
        age: 25,
        photoUrl: "https://liquipedia.net/commons/images/thumb/f/f1/GX_Jun_LEC_Winter_2025.jpg/600px-GX_Jun_LEC_Winter_2025.jpg"
      },
      {
        id: 16,
        name: "Alex Pastor Villarejo",
        alias: "Myrwn",
        game: "League of Legends",
        role: "Top",
        team: "KOI",
        country: "Espagne",
        region: "EU",
        league: "LEC",
        age: 22,
        photoUrl: "https://liquipedia.net/commons/images/thumb/0/00/MAD_Myrwn_LEC_Spring_2024.jpg/600px-MAD_Myrwn_LEC_Spring_2024.jpg"
      },
      {
        id: 17,
        name: "Javier Prades Batalla",
        alias: "Elyoya",
        game: "League of Legends",
        role: "Jungle",
        team: "KOI",
        country: "Espagne",
        region: "EU",
        league: "LEC",
        age: 25,
        photoUrl: "https://liquipedia.net/commons/images/thumb/1/13/MAD_Elyoya_LEC_Spring_2024.jpg/600px-MAD_Elyoya_LEC_Spring_2024.jpg"
      },
      {
        id: 18,
        name: "Joseph Joon Pyun",
        alias: "Jojopyun",
        game: "League of Legends",
        role: "Mid",
        team: "KOI",
        country: "Canada",
        region: "EU",
        league: "LEC",
        age: 20,
        photoUrl: "https://liquipedia.net/commons/images/thumb/4/43/MKOI_Jojopyun_LEC_Winter_2025.jpg/600px-MKOI_Jojopyun_LEC_Winter_2025.jpg"
      },
      {
        id: 19,
        name: "David Martinez Garcia",
        alias: "Supa",
        game: "League of Legends",
        role: "ADC",
        team: "KOI",
        country: "Espagne",
        region: "EU",
        league: "LEC",
        age: 24,
        photoUrl: "https://liquipedia.net/commons/images/thumb/0/06/MDK_Supa_at_LEC_Winter_2024.jpg/600px-MDK_Supa_at_LEC_Winter_2024.jpg"
      },
      {
        id: 20,
        name: "Alvaro Fernandez",
        alias: "Alvaro",
        game: "League of Legends",
        role: "Support",
        team: "KOI",
        country: "Espagne",
        region: "EU",
        league: "LEC",
        age: 22,
        photoUrl: "https://liquipedia.net/commons/images/thumb/4/4e/MDK_Alvaro_at_LEC_Winter_2024.jpg/600px-MDK_Alvaro_at_LEC_Winter_2024.jpg"
      },
      {
        id: 21,
        name: "Kim Chang-Dong",
        alias: "Canna",
        game: "League of Legends",
        role: "Top",
        team: "Karmine Corp",
        country: "Cor√©e du Sud",
        region: "EU",
        league: "LEC",
        age: 25,
        photoUrl: "https://liquipedia.net/commons/images/thumb/2/27/KC_Canna_FST_2025.jpg/600px-KC_Canna_FST_2025.jpg"
      },
      {
        id: 22,
        name: "Martin Sundelin",
        alias: "Yike",
        game: "League of Legends",
        role: "Jungle",
        team: "Karmine Corp",
        country: "Su√®de",
        region: "EU",
        league: "LEC",
        age: 24,
        photoUrl: "https://liquipedia.net/commons/images/thumb/0/00/KC_Yike_LEC_Winter_2025.jpg/600px-KC_Yike_LEC_Winter_2025.jpg"
      },
      {
        id: 23,
        name: "Vladimiros Kourtidis",
        alias: "Vladi",
        game: "League of Legends",
        role: "Mid",
        team: "Karmine Corp",
        country: "Gr√®ce",
        region: "EU",
        league: "LEC",
        age: 20,
        photoUrl: "https://liquipedia.net/commons/images/thumb/e/e9/KC_Vladi_LEC_2024_Summer.jpg/600px-KC_Vladi_LEC_2024_Summer.jpg"
      },
      {
        id: 24,
        name: "Caliste Henry-Hennebert",
        alias: "Caliste",
        game: "League of Legends",
        role: "ADC",
        team: "Karmine Corp",
        country: "France",
        region: "EU",
        league: "LEC",
        age: 18,
        photoUrl: "https://liquipedia.net/commons/images/thumb/6/60/KC_Caliste_First_Stand_2025.jpg/600px-KC_Caliste_First_Stand_2025.jpg"
      },
      {
        id: 25,
        name: "Rapha√´l Crabb√©",
        alias: "Targamas",
        game: "League of Legends",
        role: "Support",
        team: "Karmine Corp",
        country: "Belgique",
        region: "EU",
        league: "LEC",
        age: 25,
        photoUrl: "https://liquipedia.net/commons/images/thumb/a/ac/KC_Targamas_First_Stand_2025.jpg/600px-KC_Targamas_First_Stand_2025.jpg"
      },
      {
        id: 26,
        name: "Adam Maanane",
        alias: "Adam",
        game: "League of Legends",
        role: "Top",
        team: "NAVI",
        country: "France",
        region: "EU",
        league: "LEC",
        age: 23,
        photoUrl: "https://liquipedia.net/commons/images/thumb/3/34/RGE_Adam_LEC_Winter_2025.jpg/600px-RGE_Adam_LEC_Winter_2025.jpg"
      },
      {
        id: 27,
        name: "Francisco Mazo",
        alias: "Thayger",
        game: "League of Legends",
        role: "Jungle",
        team: "NAVI",
        country: "Espagne",
        region: "EU",
        league: "LEC",
        age: 23,
        photoUrl: "https://static.wikia.nocookie.net/lolesports_gamepedia_en/images/5/50/NAVI_Thayger_2025_Split_3.png/revision/latest/scale-to-width-down/220?cb=20250810162203"
      },
      {
        id: 28,
        name: "Emil Larsson",
        alias: "Larssen",
        game: "League of Legends",
        role: "Mid",
        team: "NAVI",
        country: "Su√®de",
        region: "EU",
        league: "LEC",
        age: 25,
        photoUrl: "https://liquipedia.net/commons/images/thumb/a/a0/RGE_Larssen_LEC2024.jpg/600px-RGE_Larssen_LEC2024.jpg"
      },
      {
        id: 29,
        name: "Lee Jae-hoon",
        alias: "Hans SamD",
        game: "League of Legends",
        role: "ADC",
        team: "NAVI",
        country: "Cor√©e du Sud",
        region: "EU",
        league: "LEC",
        age: 24,
        photoUrl: "https://liquipedia.net/commons/images/thumb/1/1e/Samdlck2022.jpg/600px-Samdlck2022.jpg"
      },
      {
        id: 30,
        name: "Kin Geun-Seong",
        alias: "Malrang",
        game: "League of Legends",
        role: "Support",
        team: "NAVI",
        country: "Cor√©e du Sud",
        region: "EU",
        league: "LEC",
        age: 25,
        photoUrl: "https://liquipedia.net/commons/images/thumb/3/30/RGE_Malrang_LEC_Winter_2025.jpg/600px-RGE_Malrang_LEC_Winter_2025.jpg"
      },
      {
        id: 31,
        name: "Park Geun-Woo",
        alias: "DnDn",
        game: "League of Legends",
        role: "Top",
        team: "SK Gaming",
        country: "Cor√©e du Sud",
        region: "EU",
        league: "LEC",
        age: 22,
        photoUrl: "https://liquipedia.net/commons/images/thumb/0/09/Nongshim_DnDn_LCK_2023_Spring.jpeg/600px-Nongshim_DnDn_LCK_2023_Spring.jpeg"
      },
      {
        id: 32,
        name: "Duncan Marquet",
        alias: "Skeanz",
        game: "League of Legends",
        role: "Jungle",
        team: "SK Gaming",
        country: "France",
        region: "EU",
        league: "LEC",
        age: 24,
        photoUrl: "https://liquipedia.net/commons/images/thumb/2/27/KC_Skeanz_EMEAMasters_2023.jpg/600px-KC_Skeanz_EMEAMasters_2023.jpg"
      },
      {
        id: 33,
        name: "Felix Braun",
        alias: "Abbedagge",
        game: "League of Legends",
        role: "Mid",
        team: "SK Gaming",
        country: "Allemagne",
        region: "EU",
        league: "LEC",
        age: 25,
        photoUrl: "https://liquipedia.net/commons/images/thumb/6/60/XL_Abbedagge_LEC_2023_Summer.jpg/600px-XL_Abbedagge_LEC_2023_Summer.jpg"
      },
      {
        id: 34,
        name: "Tim Willers",
        alias: "Keduii",
        game: "League of Legends",
        role: "ADC",
        team: "SK Gaming",
        country: "Allemagne",
        region: "EU",
        league: "LEC",
        age: 24,
        photoUrl: "https://liquipedia.net/commons/images/thumb/7/7c/SK_Keduii_LEC_Spring_2025.jpg/600px-SK_Keduii_LEC_Spring_2025.jpg"
      },
      {
        id: 35,
        name: "Kim Dong-Hyeon",
        alias: "Loopy",
        game: "League of Legends",
        role: "Support",
        team: "SK Gaming",
        country: "Cor√©e du Sud",
        region: "EU",
        league: "LEC",
        age: 21,
        photoUrl: "https://liquipedia.net/commons/images/thumb/a/a3/SK_Loopy_LEC_Winter_2025.jpg/600px-SK_Loopy_LEC_Winter_2025.jpg"
      },
      {
        id: 36,
        name: "Shim Yun-Hwan",
        alias: "Rooster",
        game: "League of Legends",
        role: "Top",
        team: "BDS",
        country: "Cor√©e du Sud",
        region: "EU",
        league: "LEC",
        age: 20,
        photoUrl: "https://liquipedia.net/commons/images/thumb/1/17/Hanwha_Life_Rooster_LCK_CL_2023_Spring.jpg/600px-Hanwha_Life_Rooster_LCK_CL_2023_Spring.jpg"
      },
      {
        id: 37,
        name: "Mehdi Lahlou",
        alias: "Boukada",
        game: "League of Legends",
        role: "Jungle",
        team: "BDS",
        country: "France",
        region: "EU",
        league: "LEC",
        age: 22,
        photoUrl: "https://liquipedia.net/commons/images/thumb/0/0a/SK_Boukada_LEC_Spring_2025.jpg/600px-SK_Boukada_LEC_Spring_2025.jpg"
      },
      {
        id: 38,
        name: "Ilias Bizriken",
        alias: "Nuc",
        game: "League of Legends",
        role: "Mid",
        team: "BDS",
        country: "France",
        region: "EU",
        league: "LEC",
        age: 22,
        photoUrl: "https://liquipedia.net/commons/images/thumb/3/34/BDS_nuc_LEC_Winter_2025.jpg/600px-BDS_nuc_LEC_Winter_2025.jpg"
      },
      {
        id: 39,
        name: "Yoon Sang-Hoon",
        alias: "Ice",
        game: "League of Legends",
        role: "ADC",
        team: "BDS",
        country: "Cor√©e du Sud",
        region: "EU",
        league: "LEC",
        age: 24,
        photoUrl: "https://liquipedia.net/commons/images/thumb/d/d4/BDS_Ice_LEC_2024.jpg/600px-BDS_Ice_LEC_2024.jpg"
      },
      {
        id: 40,
        name: "Polat Furkan",
        alias: "Parus",
        game: "League of Legends",
        role: "Support",
        team: "BDS",
        country: "Turquie",
        region: "EU",
        league: "LEC",
        age: 22,
        photoUrl: "https://liquipedia.net/commons/images/thumb/a/a5/BDSA_Parus_at_EMEA_Masters_Summer_2024.jpg/600px-BDSA_Parus_at_EMEA_Masters_Summer_2024.jpg"
      },
      {
        id: 41,
        name: "Carl Carlsen",
        alias: "Carlsen",
        game: "League of Legends",
        role: "Top",
        team: "Heretics",
        country: "Danemark",
        region: "EU",
        league: "LEC",
        age: 19,
        photoUrl: "https://liquipedia.net/commons/images/thumb/f/f1/TH_Carlsen_LEC_Spring_2025.jpg/600px-TH_Carlsen_LEC_Spring_2025.jpg"
      },
      {
        id: 42,
        name: "Th√©o Borile",
        alias: "Sheo",
        game: "League of Legends",
        role: "Jungle",
        team: "Heretics",
        country: "France",
        region: "EU",
        league: "LEC",
        age: 24,
        photoUrl: "https://liquipedia.net/commons/images/thumb/4/43/TH_Sheo_LEC_Spring_2025.jpg/600px-TH_Sheo_LEC_Spring_2025.jpg"
      },
      {
        id: 43,
        name: "Kamil Haudegond",
        alias: "Kamiloo",
        game: "League of Legends",
        role: "Mid",
        team: "Heretics",
        country: "France",
        region: "EU",
        league: "LEC",
        age: 20,
        photoUrl: "https://liquipedia.net/commons/images/thumb/5/5e/TH_Kamiloo_LEC_Spring_2025.jpg/600px-TH_Kamiloo_LEC_Spring_2025.jpg"
      },
      {
        id: 44,
        name: "Victor Lirola Tortosa",
        alias: "Flakked",
        game: "League of Legends",
        role: "ADC",
        team: "Heretics",
        country: "Espagne",
        region: "EU",
        league: "LEC",
        age: 24,
        photoUrl: "https://liquipedia.net/commons/images/thumb/7/77/TH_Flakked_LEC2023.jpg/600px-TH_Flakked_LEC2023.jpg"
      },
      {
        id: 45,
        name: "Paul Lardin",
        alias: "Stend",
        game: "League of Legends",
        role: "Support",
        team: "Heretics",
        country: "France",
        region: "EU",
        league: "LEC",
        age: 24,
        photoUrl: "https://liquipedia.net/commons/images/thumb/6/6b/TH_Stend_LEC_Spring_2025.jpg/600px-TH_Stend_LEC_Spring_2025.jpg"
      },
      {
        id: 46,
        name: "Kaan Okan",
        alias: "Naak Nako",
        game: "League of Legends",
        role: "Top",
        team: "Vitality",
        country: "Turquie",
        region: "EU",
        league: "LEC",
        age: 20,
        photoUrl: "https://liquipedia.net/commons/images/thumb/e/ec/VITB_Naak_Nako_at_EMEA_Masters_Summer_2024.jpg/600px-VITB_Naak_Nako_at_EMEA_Masters_Summer_2024.jpg"
      },
      {
        id: 47,
        name: "Linas Nauncikas",
        alias: "Lyncas",
        game: "League of Legends",
        role: "Jungle",
        team: "Vitality",
        country: "Lituanie",
        region: "EU",
        league: "LEC",
        age: 21,
        photoUrl: "https://liquipedia.net/commons/images/thumb/6/60/VIT_Lyncas_LEC_Winter_2025.jpg/600px-VIT_Lyncas_LEC_Winter_2025.jpg"
      },
      {
        id: 48,
        name: "Mateusz Czajka",
        alias: "Czajek",
        game: "League of Legends",
        role: "Mid",
        team: "Vitality",
        country: "Pologne",
        region: "EU",
        league: "LEC",
        age: 21,
        photoUrl: "https://liquipedia.net/commons/images/thumb/1/10/VITB_Czajek_at_EMEA_Masters_Summer_2024.jpg/600px-VITB_Czajek_at_EMEA_Masters_Summer_2024.jpg"
      },
      {
        id: 49,
        name: "Matyas Orsag",
        alias: "Carzzy",
        game: "League of Legends",
        role: "ADC",
        team: "Vitality",
        country: "Tch√©quie",
        region: "EU",
        league: "LEC",
        age: 23,
        photoUrl: "https://liquipedia.net/commons/images/thumb/3/35/VIT_Carzzy_LEC2024.jpg/600px-VIT_Carzzy_LEC2024.jpg"
      },
      {
        id: 50,
        name: "Kadir Kemiksiz",
        alias: "Fleshy",
        game: "League of Legends",
        role: "Support",
        team: "Vitality",
        country: "Turquie",
        region: "EU",
        league: "LEC",
        age: 24,
        photoUrl: "https://static.wikia.nocookie.net/lolesports_gamepedia_en/images/9/90/VIT_Fleshy_2025_Split_3.png/revision/latest/scale-to-width-down/220?cb=20250810162156"
      },
    ];

    const ATTRIBUTE_COLUMNS = [
      { key: "game", label: "Jeu" },
      { key: "role", label: "R√¥le" },
      { key: "team", label: "√âquipe" },
      { key: "league", label: "Ligue" },
      { key: "region", label: "R√©gion" },
      { key: "country", label: "Pays" },
      { key: "age", label: "√Çge" },
    ];

    const clamp = (n, min, max) => Math.max(min, Math.min(max, n));

    function seedFromDate(d) {
      const yyyy = d.getFullYear();
      const mm = d.getMonth() + 1;
      const dd = d.getDate();
      let x = yyyy * 10000 + mm * 100 + dd;
      x ^= x << 13; x ^= x >> 17; x ^= x << 5;
      return Math.abs(x);
    }

    function pickerDaily(arr, tzOffsetMinutes = 120) {
      const now = new Date();
      const local = new Date(now.getTime() + tzOffsetMinutes * 60000);
      const s = seedFromDate(local);
      const idx = s % arr.length;
      return arr[idx];
    }

    function compareField(field, guess, target) {
      const gv = guess[field];
      const tv = target[field];
      if (gv === tv) return { state: "match", text: String(gv) };

      if (field === "age") {
        const dir = gv > tv ? "‚Üì" : "‚Üë";
        return { state: "off", text: `${gv} ${dir}` };
      }
      if (field === "country" && guess.region === target.region) {
        return { state: "close", text: String(gv) };
      }
      if (field === "league" && guess.region === target.region) {
        return { state: "close", text: String(gv) };
      }
      if (field === "role" && gv && tv && gv.split("/").some((r) => String(tv).includes(r))) {
        return { state: "close", text: String(gv) };
      }
      return { state: "miss", text: String(gv ?? "‚Äî") };
    }

    function classForState(state) {
      switch (state) {
        case "match": return "bg-green-500 text-white";
        case "close": return "bg-red-500 text-black";
        case "off":   return "bg-gray-200 text-gray-900";
        default:      return "bg-slate-700 text-white";
      }
    }

    function silhouetteStyle(percent) {
      const blur = clamp(16 - (percent / 100) * 16, 0, 16);
      const dim = clamp(0.7 - (percent / 100) * 0.7, 0, 0.7);
      return { filter: `blur(${blur}px)`, opacity: 1 - dim };
    }

    function buildShare(guesses, target) {
      const header = `GuessTheEsportPlayer ‚Äî ${guesses.length}/8`;
      const lines = guesses.map((g) => {
        return ATTRIBUTE_COLUMNS.map(({ key }) => {
          const { state } = compareField(key, g, target);
          if (state === "match") return "üü©";
          if (state === "close") return "üü®";
          if (state === "off") return "‚¨ú";
          return "‚¨õ";
        }).join("");
      });
      return [header, ...lines].join("\\n");
    }

    function App() {
      const [practice, setPractice] = useState(false);
      const [target, setTarget] = useState(() => pickerDaily(PLAYERS));
      const [query, setQuery] = useState("");
      const [guesses, setGuesses] = useState([]);
      const [selectedIndex, setSelectedIndex] = useState(0);
      const [message, setMessage] = useState("");

      const maxTries = 8;
      const gameOver = guesses.length >= maxTries || (guesses.length > 0 && guesses[guesses.length - 1].id === target.id);
      const won = guesses.some((g) => g.id === target.id);

      const suggestions = useMemo(() => {
        const q = query.trim().toLowerCase();
        if (!q) return [];
        return PLAYERS.filter((p) =>
          [p.name, p.alias].some((s) => s?.toLowerCase().includes(q))
        ).slice(0, 8);
      }, [query]);

      const revealPercent = useMemo(() => {
        if (won) return 100;
        const matches = guesses.reduce((acc, g) => {
          let m = 0;
          ATTRIBUTE_COLUMNS.forEach(({ key }) => {
            if (compareField(key, g, target).state === "match") m += 1;
          });
          return acc + m;
        }, 0);
        return clamp(Math.round((matches / (ATTRIBUTE_COLUMNS.length * maxTries)) * 100) + guesses.length * 5, 0, 99);
      }, [guesses, target, won]);

      useEffect(() => {
        const onKey = (e) => {
          if (e.key === "ArrowDown") {
            e.preventDefault();
            setSelectedIndex((i) => clamp(i + 1, 0, Math.max(0, suggestions.length - 1)));
          } else if (e.key === "ArrowUp") {
            e.preventDefault();
            setSelectedIndex((i) => clamp(i - 1, 0, Math.max(0, suggestions.length - 1)));
          } else if (e.key === "Enter" && suggestions[selectedIndex]) {
            e.preventDefault();
            onPick(suggestions[selectedIndex]);
          }
        };
        window.addEventListener("keydown", onKey);
        return () => window.removeEventListener("keydown", onKey);
      }, [suggestions, selectedIndex]);

      function onPick(player) {
        if (gameOver) return;
        if (guesses.some((g) => g.id === player.id)) {
          setMessage("D√©j√† essay√©.");
          return;
        }
        setGuesses((gs) => [...gs, player]);
        setQuery("");
        setSelectedIndex(0);
        setMessage("");
      }

      function onReroll() {
        setGuesses([]);
        setQuery("");
        setSelectedIndex(0);
        if (practice) {
          const pool = PLAYERS.filter((p) => p.id !== target.id);
          setTarget(pool[Math.floor(Math.random() * pool.length)]);
        } else {
          setTarget(pickerDaily(PLAYERS));
        }
      }

      async function onShare() {
        const text = buildShare(guesses, target);
        try {
          await navigator.clipboard.writeText(text);
          setMessage("R√©sultat copi√© dans le presse-papiers ‚ú®");
        } catch (e) {
          setMessage("Impossible de copier. (Permissions clipboard)");
        }
      }

      return (
        <div className="min-h-screen bg-gradient-to-b from-slate-900 via-slate-900 to-slate-950 text-slate-50 p-4 sm:p-8">
          <div className="mx-auto max-w-5xl">
            <header className="flex flex-col sm:flex-row gap-4 items-center justify-between mb-6">
              <h1 className="text-3xl sm:text-4xl font-extrabold tracking-tight">
                Guess The <span className="text-indigo-400">Esport Player</span>
              </h1>
              <div className="flex items-center gap-2">
                <button
                  onClick={() => setPractice((p) => !p)}
                  className={"px-3 py-2 text-sm rounded-2xl shadow " + (practice ? "bg-indigo-500" : "bg-slate-800")}
                  title="Basculer en mode entra√Ænement"
                >
                  {practice ? "Mode entra√Ænement" : "Mode quotidien"}
                </button>
                <button
                  onClick={onReroll}
                  className="px-3 py-2 text-sm rounded-2xl shadow bg-slate-800 hover:bg-slate-700"
                >
                  {practice ? "Nouveau tirage" : "Recharger le jour"}
                </button>
              </div>
            </header>

            <div className="grid grid-cols-1 lg:grid-cols-3 gap-6 mb-8">
              <div className="lg:col-span-1">
                <div className="relative w-full aspect-square rounded-2xl overflow-hidden bg-slate-800 shadow-xl">
                  {target.photoUrl ? (
                    <img
                      src={target.photoUrl}
                      alt="Player"
                      className="w-full h-full object-cover"
                      style={silhouetteStyle(revealPercent)}
                    />
                  ) : (
                    <div className="w-full h-full flex items-center justify-center text-6xl">üïµÔ∏è‚Äç‚ôÇÔ∏è</div>
                  )}
                  <div className="absolute bottom-0 left-0 right-0 p-3 bg-gradient-to-t from-black/60 to-transparent text-sm flex items-center justify-between">
                    <span>R√©v√©lation: {revealPercent}%</span>
                    {won && <span className="font-semibold text-green-400">Bravo !</span>}
                  </div>
                </div>
              </div>

              <div className="lg:col-span-2">
                <div className="rounded-2xl bg-slate-800/70 border border-slate-700 p-4 shadow-xl">
                  <label className="block text-sm text-slate-300 mb-2">Tape un pseudo ou un nom</label>
                  <input
                    value={query}
                    onChange={(e) => setQuery(e.target.value)}
                    placeholder="Ex: Canna, Hans Sama‚Ä¶"
                    className="w-full rounded-xl bg-slate-900 border border-slate-700 px-4 py-3 outline-none focus:ring-2 focus:ring-indigo-500"
                  />

                  {suggestions.length > 0 && (
                    <ul className="mt-3 max-h-64 overflow-auto rounded-xl border border-slate-700 bg-slate-900 divide-y divide-slate-800">
                      {suggestions.map((p, i) => (
                        <li
                          key={p.id}
                          onClick={() => onPick(p)}
                          className={"px-4 py-3 cursor-pointer hover:bg-slate-800 flex items-center justify-between " + (i === selectedIndex ? "bg-slate-800" : "")}
                        >
                          <div>
                            <div className="font-semibold">{p.alias}</div>
                            <div className="text-xs text-slate-400">{p.name}</div>
                          </div>
                          <div className="text-xs text-slate-400">{p.team} ‚Ä¢ {p.game}</div>
                        </li>
                      ))}
                    </ul>
                  )}

                  <div className="flex items-center justify-between mt-4 text-sm text-slate-400">
                    <span>Essais: <b className="text-slate-200">{guesses.length}</b> / {maxTries}</span>
                    <div className="flex gap-2">
                      <button onClick={onShare} disabled={guesses.length === 0} className="px-3 py-2 rounded-xl bg-indigo-600 disabled:opacity-50">
                        Partager
                      </button>
                      <button
                        onClick={() => { setGuesses([]); setMessage("R√©initialis√©."); }}
                        className="px-3 py-2 rounded-xl bg-slate-700"
                      >
                        R√©initialiser
                      </button>
                    </div>
                  </div>
                  {message && <div className="mt-2 text-sm text-slate-300">{message}</div>}
                </div>
              </div>
            </div>

            <section className="rounded-2xl bg-slate-800/70 border border-slate-700 p-4 shadow-xl">
              <h2 className="text-lg font-semibold mb-3">Tes propositions</h2>
              <div className="overflow-x-auto">
                <table className="min-w-full text-sm">
                  <thead className="text-left text-slate-300">
                    <tr>
                      <th className="p-2">Joueur</th>
                      {ATTRIBUTE_COLUMNS.map((c) => (
                        <th key={c.key} className="p-2 whitespace-nowrap">{c.label}</th>
                      ))}
                    </tr>
                  </thead>
                  <tbody>
                    {guesses.map((g) => (
                      <tr key={g.id} className="border-t border-slate-700">
                        <td className="p-2">
                          <div className="flex items-center gap-3">
                            <div className="w-9 h-9 rounded-lg bg-slate-700 overflow-hidden">
                              <img src={g.photoUrl} alt="" className="w-full h-full object-cover" />
                            </div>
                            <div>
                              <div className="font-semibold">{g.alias}</div>
                              <div className="text-xs text-slate-400">{g.name}</div>
                            </div>
                          </div>
                        </td>
                        {ATTRIBUTE_COLUMNS.map(({ key }) => {
                          const { state, text } = compareField(key, g, target);
                          return (
                            <td key={key} className="p-2">
                              <span className={"px-2 py-1 rounded-lg text-xs font-semibold inline-block " + classForState(state)}>
                                {text}
                              </span>
                            </td>
                          );
                        })}
                      </tr>
                    ))}
                    {guesses.length === 0 && (
                      <tr>
                        <td colSpan={1 + ATTRIBUTE_COLUMNS.length} className="p-6 text-center text-slate-400">
                          Aucune proposition pour l'instant. Cherche un joueur ci-dessus.
                        </td>
                      </tr>
                    )}
                  </tbody>
                </table>
              </div>

              <div className="mt-4 p-4 rounded-xl bg-slate-900 border border-slate-700">
                {won ? (
                  <div>
                    <div className="text-green-400 font-semibold mb-1">Tu as trouv√© !</div>
                    <div className="text-slate-300">C'√©tait <b>{target.alias}</b> ({target.name}).</div>
                  </div>
                ) : (
                  <div>
                    <div className="text-slate-300">Tente ta chance en {practice ? "entra√Ænement" : "quotidien"}.</div>
                  </div>
                )}
              </div>
            </section>

            <footer className="text-xs text-slate-400 mt-8 space-y-2">
              <p>
                Remplace la liste <code>PLAYERS</code> par tes donn√©es (JSON, API, etc.).
                Champs: <code>name</code>, <code>alias</code>, <code>game</code>, <code>role</code>, <code>team</code>, <code>league</code>, <code>region</code>, <code>country</code>, <code>age</code>, <code>photoUrl</code>.
              </p>
              <p>Pour le moment, seul le LEC est disponible mais prochainement seront disponible la LCK et la LPL :D</p>
            </footer>
          </div>
        </div>
      );
    }

    const root = ReactDOM.createRoot(document.getElementById("root"));
    root.render(<App />);
  </script>
</body>
</html>
